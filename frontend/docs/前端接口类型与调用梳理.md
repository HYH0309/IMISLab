# 前端接口类型与调用梳理

## 1. 类型定义（src/types/api.d.ts）

- **ArticleRequest**

  ```ts
  interface ArticleRequest {
    title: string;
    content: string;
    tag_ids: number[];
    coverUrl?: string;
  }
  ```

- **ArticleContent**、**ArticleSummary**、**Tag**、**Comment**、**OJProblem**、**OJTestCase**、**OJRequest**、**JudgeRequest**、**SubmitResponse**、**JudgeResult** 等类型均有详细定义。

## 2. 前端 API 封装（src/api/index.ts）

- 文章相关：
  - `createArticle(article: ArticleRequest)`
  - `getArticles()`
  - `getArticleById(id: number)`
  - `deleteArticle(id: number)`
- 评论相关：
  - `getCommentsByArticleId(id: number)`
  - `postComment(comment: Comment)`
- 标签相关：
  - `createTag(name: string)`
  - `getTags()`
  - `updateTag(id, {name})`
  - `deleteTag(id)`
- OJ相关、图片上传等也有对应方法。

## 3. 页面调用示例

- 文章列表页（ArticleListView.vue）：
  - `api.getArticles()` 获取所有文章摘要
  - `api.getTags()` 获取所有标签
- 文章详情页（ArticleView.vue）：
  - `api.getArticleById(id)` 获取文章内容
  - `api.getCommentsByArticleId(id)` 获取评论
  - `api.postComment(comment)` 提交评论
- 管理页（AdminView.vue）：
  - `api.getArticles()`、`api.getTags()`、`api.getOJProblems()`

## 4. 主要问题点

- `ArticleRequest` 的 `tag_ids` 字段为 `number[]`，后端为 `tagIds: string`，字段名和类型不一致。
- `getArticles()` 没有分页参数，后端支持分页。
- 图片上传接口路径为 `/img`，后端为 `/images`，不一致。
- OJ相关接口部分路径、参数与后端文档不完全一致。

## 5. 建议

- 对照后端接口文档，调整前端 API 方法签名、参数和路径。
- 统一类型定义，确保字段名和类型与后端一致。
- 检查所有页面和 composable 的 API 调用，避免遗漏参数或类型不符。
